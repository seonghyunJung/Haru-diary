{% extends 'base.html' %}
{% block content %}
    <div class="container">
        <form method="post">
            {% csrf_token %}
            <!-- ì˜¤ë¥˜í‘œì‹œ Start -->
            {% include 'form_errors.html' %}
            <!-- ì˜¤ë¥˜í‘œì‹œ End -->
            <div class="mb-3">
                <h4 class="mt-5">{{ date }}</h4>
                {#                {% if primary_emotion %}#}
                {#                    <h5 style="color: gray;">ê°ì •ë¶„ì„ ê²°ê³¼ : <span style="font-size:200%">{{ primary_emotion }}</span>#}
                {#                    </h5>{% endif %}#}
                {% if emotion_pt %}
                    <h5 style="color: gray;">ê°ì •ë¶„ì„ ê²°ê³¼:
                        <span style="color: rgba(195, 192, 187, 1)">ì¤‘ë¦½({{ emotion_pt.neutral }}%), </span>
                        <span style="color: rgba(54, 162, 235, 1)">ğŸ˜Š í–‰ë³µ({{ emotion_pt.happiness }}%)</span>,
                        <span style="color: rgba(255, 206, 86, 1)">ğŸ˜­ ìŠ¬í””({{ emotion_pt.sadness }}%)</span>,
                        <span style="color: rgba(255, 99, 132, 1)">ğŸ˜¡ ë¶„ë…¸({{ emotion_pt.angry }}%)</span>,
                        <span style="color: rgba(153, 102, 255, 1)">ğŸ¤® í˜ì˜¤({{ emotion_pt.disgust }}%), </span>
                        <span style="color: rgba(75, 192, 192, 1)">ğŸ˜¨ ê³µí¬({{ emotion_pt.fear }}%), </span>
                        <span style="color: rgba(255, 159, 64, 1)">ğŸ˜³ ë†€ëŒ({{ emotion_pt.surprise }}%)</span>
                    </h5>
                {% endif %}
                <textarea class="form-control" name="content" id="content" rows="20" style="resize: none"
                          placeholder="ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ê¸°ë¡í•´ì£¼ì„¸ìš”.">{{ form.content.value|default_if_none:'' }}</textarea>
            </div>
            <div class="d-grid">
                {% if form.content.value %}
                    <button type="submit" class="btn btn-primary" id="model">ìˆ˜ì •</button>
                    <a href="javascript:void(0)" class="delete btn btn-outline-secondary"
                       data-uri="{% url 'haru:diary_delete' diary.id %}">ì‚­ì œ</a>
                    {#                    <a href="{% url 'haru:diary_delete' diary.id %}" class="btn btn-secondary">ì‚­ì œ</a>#}
                {% else %}
                    <button type="submit" class="btn btn-primary" id="model">ì €ì¥</button>
                {% endif %}


            </div>
        </form>
    </div>
    <div id="overlay" style="display:none;">
        <div class="spinner"></div>
        <br/>
        Loading...
    </div>
{% endblock %}
{% block script %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#model').click(function () {
                $('#overlay').fadeIn().delay(50000).fadeOut();
            });
        });
        const delete_elements = document.getElementsByClassName("delete");
        Array.from(delete_elements).forEach(function (element) {
            element.addEventListener('click', function () {
                if (confirm("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                    location.href = this.dataset.uri;
                }
            });
        });
    </script>
{% endblock %}
